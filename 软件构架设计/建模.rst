.. Kenneth Lee 版权所有 2021

:Authors: Kenneth Lee
:Version: 1.0
:Date: 2021-08-10
:Status: Draft

建模
******

最近在看一本明代的笔记，作者是叶子奇（叶世杰，不少民间故事很喜欢拉他进来当“机智
”型的主角），据说一度和宋濂，刘基齐名。

下面这一段摘自《草木子-管窥篇》：::

  天始惟一气尔，《庄子》所谓“溟涬”是也。计其所先，莫先于水。水中滓浊，历岁既久
  ，积而成土。水土震荡，渐加凝聚，水落石出，遂成山川。故山形有波浪之势焉。于是
  土之刚者成石而金生焉，土之柔者生木而火生焉。五行既具，乃生万物，万物化生而变
  化无穷焉。

后面还有将南北极，赤道黄道的关系，也有正确的，也有纯粹胡说八道的。

我看到这些描述，感觉上是很亲切的。因为他这个行为，和我平时做架构建模的手法是一
样的。当我们开始做一个架构设计，手上有很多的信息，有真的，有假的，有人说用GPU肯
定能搞定这里的机器训练，有人说在Linux用户态写这个程序肯定不用开源，有人说选C++
决定是我们这个领域的方向……你说他们说的对不对？你去调查吗？你选择调查C++已经被人
带过去了，打算选C++了，否则你干嘛不去调查C#，Python，甚至haskell和ocaml？而且调查
你能知道要调查多深？学三年C++算懂吗？这种东西是没有尽头的。

所以，就好像这位叶世杰一样，我们也会不管三七二十一，先把手上的所有有效信息，组
织起来，变成一个完整的逻辑链，因为这样我们才能判断出：针对我们要解决的问题，我们
可以选择那个部分去进行重新校验和细化。

他前面这个描述，看起来基于当时他掌握的信息来说，都挺有道理的：我们平时看到最多
的不是各种看得见，看不见的“气”吗？我们不是看到水蒸汽遇冷变成水吗？水里的泥粉不
是慢慢沉淀变成土吗？土里不是长出树或者露出石头吗？有些石头里面不是有铁矿吗？不
是还有其他人说水生土，土生木，木生火吗？……

把这些逻辑一组合——我们的世界就是这样的。

你不建立这个模型，你都不知道怎么开始去研究这个世界，这和亚里士多德总结太阳围着
地球转，重的东西先落地没有多少区别。你先得建立一个“模型”，然后用它去不断比较现
实，你才能获得新的“知识”，因为人脑处理信息啊，除了的到“在集合中”和“不在集合中”，
就没有别的能力了。

你看个Linux Kernel的代码，你看到他prempt_disable()，看到他trace_hardirqs_off()
，看到它调用paravirt_clobber()，你知道它啥意思？没有一个统领逻辑，你没法看这个
代码。

所以，无论去做设计还是去分析一个代码的逻辑，我们都是先从一个“假设”开始建模，我
们并不认为这些假设都是对的，但这个东西本身必须存在。

很多工程师不理解这一点，我们更注重“对”，他们很强调：“难道现在这个代码里，
prempt_disable不就是对全局变量进行掩码覆盖吗？”，是，在这个场景，这确实是这样的
，但架构是要改造世界，现在是这样，未来是这样吗？这就好比对于给你家装修的架构师
，他觉得这里可以放一个玄关，你去跟他掰：“这里不是有堵墙吗？旁边不是有家具吗？”—
—废话，对架构师来说，非承重墙可以打掉，家具可以搬走的啊。

但另一方面来说，今天还有不少人相信那个金木水火土那一套。这另一方面也告诉我们另
一个特性了，模型就是模型，它不是真理，我们建个模型，是为了进行现实对比，不是为
了建立一个不能动的东西。你拿这个东西说什么“你算什么东西，怎么和老祖宗五千年的智
慧相比？”，“XXX是建立我们整个软件技术的奠基人，是我们YYY架构的元老，你算什么，
也敢批评他的架构？”……这完全是“九唔搭八”。

做架构必须理解这一点了，我们才能实际去讨论架构，否则说半天，你都不知道架构师在
说啥。
